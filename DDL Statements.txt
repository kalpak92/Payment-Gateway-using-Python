CREATE TABLE CARD_DETAILS(
CARD_NUMBER VARCHAR2(19) PRIMARY KEY CHECK(LENGTH(CARD_NUMBER) =19),
CUST_NAME VARCHAR2(30) NOT NULL,
EXPIRY_DATE VARCHAR2(5) NOT NULL CHECK(EXPIRY_DATE LIKE '__/__'),
CVV NUMBER(3) NOT NULL,
CARD_TYPE VARCHAR2(15) NOT NULL CHECK(UPPER(CARD_TYPE) IN ('VISA','MASTER CARD','MAESTRO')),
STATUS VARCHAR2(15) CHECK(UPPER(STATUS) IN ('ACTIVE', 'INACTIVE')),
BALANCE NUMBER NOT NULL,
GRID_CODE VARCHAR2(50) NOT NULL CHECK(GRID_CODE LIKE '__-__-__-__-__-__-__-__-__-__-__-__-__-__-__-__')
);





CREATE TABLE OPERATOR(
OP_ID VARCHAR2(5) PRIMARY KEY,
OP_NAME VARCHAR2(20) NOT NULL
);





CREATE TABLE OPERATOR_DTH(
OP_ID VARCHAR2(5) PRIMARY KEY REFERENCES OPERATOR(OP_ID),
MONTHLY_RENTAL NUMBER CHECK(MONTHLY_RENTAL >= 200) );




CREATE TABLE VODAFONE_MOBILE(
RECH_TYPE VARCHAR2(30) CHECK(UPPER(RECH_TYPE) IN('BALANCE','DATA','SMS')), 
RECH_AMOUNT NUMBER(7,2) NOT NULL,
SCHEME VARCHAR2(30) NOT NULL,
VALIDITY VARCHAR2(15) NOT NULL,
PRIMARY KEY(RECH_TYPE, RECH_AMOUNT) );




CREATE TABLE AIRTEL_MOBILE(
RECH_TYPE VARCHAR2(30) CHECK(UPPER(RECH_TYPE) IN('BALANCE','DATA','SMS')), 
RECH_AMOUNT NUMBER(7,2) NOT NULL,
SCHEME VARCHAR2(30) NOT NULL,
VALIDITY VARCHAR2(15) NOT NULL,
PRIMARY KEY(RECH_TYPE, RECH_AMOUNT) );




CREATE TABLE BSNL_MOBILE(
RECH_TYPE VARCHAR2(30) CHECK(UPPER(RECH_TYPE) IN('BALANCE','DATA','SMS')), 
RECH_AMOUNT NUMBER(7,2) NOT NULL,
SCHEME VARCHAR2(30) NOT NULL,
VALIDITY VARCHAR2(15) NOT NULL,
PRIMARY KEY(RECH_TYPE, RECH_AMOUNT) );




CREATE TABLE TATA_DOCOMO_MOBILE(
RECH_TYPE VARCHAR2(30) CHECK(UPPER(RECH_TYPE) IN('BALANCE','DATA','SMS')), 
RECH_AMOUNT NUMBER(7,2) NOT NULL,
SCHEME VARCHAR2(30) NOT NULL,
VALIDITY VARCHAR2(15) NOT NULL,
PRIMARY KEY(RECH_TYPE, RECH_AMOUNT) );
CREATE TABLE TATA_INDICOM_MOBILE(
RECH_TYPE VARCHAR2(30) CHECK(UPPER(RECH_TYPE) IN('BALANCE','DATA','SMS')), 
RECH_AMOUNT NUMBER(7,2) NOT NULL,
SCHEME VARCHAR2(30) NOT NULL,
VALIDITY VARCHAR2(15) NOT NULL,
PRIMARY KEY(RECH_TYPE, RECH_AMOUNT) );
CREATE TABLE AIRCEL_MOBILE(
RECH_TYPE VARCHAR2(30) CHECK(UPPER(RECH_TYPE) IN('BALANCE','DATA','SMS')), 
RECH_AMOUNT NUMBER(7,2) NOT NULL,
SCHEME VARCHAR2(30) NOT NULL,
VALIDITY VARCHAR2(15) NOT NULL,
PRIMARY KEY(RECH_TYPE, RECH_AMOUNT) );
CREATE TABLE IDEA_MOBILE(
RECH_TYPE VARCHAR2(30) CHECK(UPPER(RECH_TYPE) IN('BALANCE','DATA','SMS')), 
RECH_AMOUNT NUMBER(7,2) NOT NULL,
SCHEME VARCHAR2(30) NOT NULL,
VALIDITY VARCHAR2(15) NOT NULL,
PRIMARY KEY(RECH_TYPE, RECH_AMOUNT) );
CREATE TABLE RELIANCE_MOBILE(
RECH_TYPE VARCHAR2(30) CHECK(UPPER(RECH_TYPE) IN('BALANCE','DATA','SMS')), 
RECH_AMOUNT NUMBER(7,2) NOT NULL,
SCHEME VARCHAR2(30) NOT NULL,
VALIDITY VARCHAR2(15) NOT NULL,
PRIMARY KEY(RECH_TYPE, RECH_AMOUNT) );





CREATE TABLE CUSTOMER_MOBILE(
PHONE_NO NUMBER(10) PRIMARY KEY CHECK(LENGTH(TO_CHAR(PHONE_NO)) =10),
CONN_TYPE VARCHAR2(20) CHECK(UPPER(CONN_TYPE) IN ('POSTPAID','PREPAID')),
MOB_BALANCE NUMBER(7,2) NOT NULL,
MONTHLY_RENTAL NUMBER(7,2),
OP_ID VARCHAR2(5) REFERENCES OPERATOR(OP_ID)
);



CREATE TABLE CUSTOMER_DTH(
ACCOUNT_ID VARCHAR2(5) PRIMARY KEY,
DTH_BALANCE NUMBER(7,2) NOT NULL,
DUE_DATE DATE NOT NULL,
PHONE_NO NUMBER(10) CHECK(LENGTH(TO_CHAR(PHONE_NO)) =10),
OP_ID VARCHAR2(5) REFERENCES OPERATOR_DTH(OP_ID)
);